server.port=8080
spring.application.name=infra-gateway
spring.main.web-application-type=reactive

# Conexión con Eureka
eureka.client.service-url.defaultZone=http://localhost:8761/eureka/

# --- Rutas (Routes) ---
# El orden importa (indices [0], [1]). Las rutas más específicas deben ir primero.

# Ruta para MS-AUTH
# Coincide con /api/auth/** y lo envía a ms-auth
# (MsAuthApplication tiene @RequestMapping("/api/auth"))
spring.cloud.gateway.routes[0].id=ms-auth
spring.cloud.gateway.routes[0].uri=lb://ms-auth
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/auth/**

# Ruta para MS-TIENDA
# Coincide con el resto de /api/** (productos, boletas) y lo envía a ms-tienda
# (MsTiendaApplication tiene @RequestMapping("/api/productos") y "/api/boletas")
spring.cloud.gateway.routes[1].id=ms-tienda
spring.cloud.gateway.routes[1].uri=lb://ms-tienda
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/**

# --- Configuración CORS Global ---
# Vital para permitir que el Frontend (puerto 5173) llame al Gateway (puerto 8080)
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-origins=http://localhost:5173
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-methods=GET,POST,PUT,DELETE,OPTIONS
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-headers=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allow-credentials=true