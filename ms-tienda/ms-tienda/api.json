{"openapi":"3.0.1","info":{"title":"MS-TIENDA API (Microservicio de Tienda/Catálogo)","description":"API para gestionar el catálogo de productos y el historial de boletas (compras).","contact":{"name":"Equipo de Desarrollo","email":"dev@tienda.cl"},"version":"1.0"},"servers":[{"url":"http://127.0.0.1:8082","description":"Generated server url"}],"security":[{"BearerAuth":[]}],"tags":[{"name":"Boletas","description":"Gestión de boletas (compras) de los clientes."},{"name":"Productos","description":"Gestión del catálogo de productos."}],"paths":{"/api/productos/{id}":{"get":{"tags":["Productos"],"summary":"Obtener un producto por ID","description":"Busca un producto por su ID.","operationId":"obtenerPorId","parameters":[{"name":"id","in":"path","description":"ID del producto","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"200":{"description":"Producto encontrado","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Producto"}}}},"404":{"description":"Producto no encontrado"}}},"put":{"tags":["Productos"],"summary":"Actualizar un producto","description":"Actualiza un producto existente por ID.","operationId":"actualizarProducto","parameters":[{"name":"id","in":"path","description":"ID del producto a actualizar","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Producto"}}},"required":true},"responses":{"200":{"description":"Producto actualizado","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Producto"}}}},"404":{"description":"Producto no encontrado"},"400":{"description":"Datos inválidos"}}},"delete":{"tags":["Productos"],"summary":"Eliminar un producto","description":"Elimina un producto por su ID.","operationId":"eliminarProducto","parameters":[{"name":"id","in":"path","description":"ID del producto","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"204":{"description":"Producto eliminado","content":{"*/*":{"schema":{"type":"object"}}}},"404":{"description":"Producto no encontrado"}}}},"/api/productos":{"get":{"tags":["Productos"],"summary":"Listar todos los productos","description":"Devuelve una lista completa de productos.","operationId":"listar","responses":{"200":{"description":"Productos obtenidos","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Producto"}}}}}},"post":{"tags":["Productos"],"summary":"Crear un nuevo producto","description":"Agrega un nuevo producto.","operationId":"crearProducto","requestBody":{"description":"Producto a crear","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductoRequest"},"example":{"nombre":"Camiseta deportiva","precio":19.99,"imagen":"https://example.com/imagen.jpg","descripcion":"Camiseta de algodón","destacado":false,"categoriaId":1}}},"required":true},"responses":{"201":{"description":"Producto creado","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Producto"}}}},"400":{"description":"Datos inválidos"}}}},"/api/boletas":{"post":{"tags":["Boletas"],"summary":"Crea una nueva boleta (Compra)","description":"Registra una nueva transacción de compra. Acceso público (Sin autenticación).","operationId":"crearBoleta","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Boleta"}}},"required":true},"responses":{"200":{"description":"Boleta creada exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Boleta"}}}},"400":{"description":"Solicitud inválida","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Boleta"}}}}}}},"/api/boletas/usuario/{correo}":{"get":{"tags":["Boletas"],"summary":"Obtiene historial de compras por correo","description":"Obtiene la lista de boletas asociadas a un correo de usuario específico. Acceso público (Sin autenticación).","operationId":"obtenerPorUsuario","parameters":[{"name":"correo","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Historial de boletas obtenido exitosamente","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Boleta"}}}}},"404":{"description":"Usuario o boletas no encontrados","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Boleta"}}}}}}}}},"components":{"schemas":{"Categoria":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"nombre":{"type":"string"}}},"Producto":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"nombre":{"type":"string"},"precio":{"type":"number","format":"double"},"imagen":{"type":"string"},"descripcion":{"type":"string"},"destacado":{"type":"boolean"},"categoria":{"$ref":"#/components/schemas/Categoria"}}},"ProductoRequest":{"required":["categoriaId","nombre","precio"],"type":"object","properties":{"nombre":{"type":"string","description":"Nombre del producto","example":"Camiseta deportiva"},"precio":{"type":"number","description":"Precio del producto","format":"double","example":19.99},"imagen":{"type":"string","description":"URL de la imagen del producto","example":"https://example.com/imagen.jpg"},"descripcion":{"type":"string","description":"Descripción del producto","example":"Camiseta de algodón de alta calidad"},"destacado":{"type":"boolean","description":"Indica si es producto destacado","example":false},"categoriaId":{"type":"integer","description":"ID de la categoría asociada","format":"int64","example":1}},"description":"Representación del producto a crear/actualizar"},"Boleta":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"usuarioCorreo":{"type":"string"},"fecha":{"type":"string","format":"date-time"},"total":{"type":"number","format":"double"},"detalles":{"type":"array","items":{"$ref":"#/components/schemas/DetalleBoleta"}}}},"DetalleBoleta":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"productoId":{"type":"integer","format":"int64"},"cantidad":{"type":"integer","format":"int32"},"precioUnitario":{"type":"number","format":"double"}}}},"securitySchemes":{"BearerAuth":{"type":"http","description":"Token JWT (simulado) para acceder a recursos protegidos. Requiere el prefijo 'Bearer '.","scheme":"bearer","bearerFormat":"JWT"}}}}